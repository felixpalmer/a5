"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[3173],{1383:(t,e,n)=>{n.d(e,{$p:()=>u,Rb:()=>g,WP:()=>x,lN:()=>f,o4:()=>h,q8:()=>c,r5:()=>m,uB:()=>p});var r=n(7823),o=n(842),s=n(9699),i=n(1997);function a(t){return t*(Math.PI/180)}function l(t){return t*(180/Math.PI)}function c(t){return[o.Bw(t),Math.atan2(t[1],t[0])]}function u(t){let[e,n]=t;return[e*Math.cos(n),e*Math.sin(n)]}function h(t){return o.ZF(o.vt(),t,i.wc)}function f(t){const e=Math.atan2(t[1],t[0]),n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[e,Math.acos(t[2]/n)]}function p(t){let[e,n]=t;return[Math.sin(n)*Math.cos(e),Math.sin(n)*Math.sin(e),Math.cos(n)]}r.fG(Float64Array);const d=93;function g(t){let[e,n]=t;return[a(e+d),a(90-n)]}function x(t){let[e,n]=t;return[l(e)-d,90-l(n)]}function m(t){const e=p(t),n=s.vt();return s.Yc(n,[0,0,1],e),n}},1921:(t,e,n)=>{n.d(e,{u$:()=>I,WH:()=>A,ce:()=>y});var r=n(7823),o=n(3522),s=n(842),i=n(1383),a=n(3243),l=n(6864),c=n(1970),u=n(1997),h=n(1148),f=n(3255);r.fG(Float64Array);const p=!1,d=s.o8(u.w),g=s.ze(s.vt(),u.w),x=[0,1,2,3,4].map((t=>{const e=o.vt();return o.$0(e,h.UT*t),e})),m=s.vt();r.fG(Float64Array);const M=o.vt();function v(t,e){const n=(0,i.q8)(t),r=(0,l.s)(n,e.quat,e.angle),c=(0,a.jS)(r,e)?e:(0,a.Sj)(r);if(c.id!==e.id){const n=s.vt();o.$0(M,e.angle),s.ZF(n,t,M);const{point:u,quat:f}=(0,a.MQ)(n,e,c);let p=0;e.angle!==c.angle&&0!==c.angle&&(p=-h.R);let d=(0,i.q8)(u);d[1]=d[1]-p;const g=(0,l.s)(d,f,p);r[0]=g[0],r[1]=g[1]}return(0,i.WP)(r)}function w(t,e){const n=t.getVertices().map((t=>v(t,e)));return c.c.normalizeLongitudes(n)}var b=n(2189);r.fG(Float64Array);const j=o.vt();function y(t,e){const n=1+e-b.To,r=[t],o=50/Math.pow(2,n);for(let c=0;c<25;c++){const e=c/25*o,n=s.fA(Math.cos(c)*e,Math.sin(c)*e);s.WQ(n,n,t),r.push(n)}const i=[];for(const s of r){const n=S(s,e);if(e<b.To||P(n,t))return(0,b.lK)(n);i.push(n)}let a=1/0,l=null;for(const c of i){const e=v(k(c).getCenter(),c.origin),n=s.xg(e,t);n<a&&(a=n,l=c)}if(l)return(0,b.lK)(l);throw new Error("No cell found")}function S(t,e){const n=(0,i.Rb)(t),r={...(0,a.Sj)(n)};o.$0(j,-r.angle);const c=(0,l.r)(n,r.quat,r.angle),p=(0,i.$p)(c),d=function(t){const e=(Math.atan2(t[1],t[0])-u.V+h.JM)%h.JM;return Math.ceil(e/h.UT)%5}(p),{segment:g,orientation:x}=(0,a.b5)(d,r);if(e<b.To)return{S:0n,segment:g,origin:r,resolution:e};if(0!==d){const t=2*h.R*d;o.$0(j,-t),s.ZF(p,p,j)}const m=1+e-b.To;s.hs(p,p,2**m);const M=(0,i.o4)(p);return{S:(0,f.eS)(M,m,x),segment:g,origin:r,resolution:e}}function k(t){let{S:e,segment:n,origin:r,resolution:o}=t;const{quintant:i,orientation:l}=(0,a.BL)(n,r);if(o===b.To-1){const t=function(t){const e=u.LF.clone();return e.transform(x[t]),e}(i);return t}if(o===b.To-2)return function(){const t=[];for(const e of x)t.push(s.ZF(s.vt(),u.v,e));return new c.c(t)}();const h=o-b.To+1;return function(t,e,n){const r=(p?u.LF:u.tK).clone();s.ZF(m,n.offset,u.P9),n.flips[0]===f.NO&&n.flips[1]===f._Y&&r.rotate180();const{k:o}=n,i=n.flips[0]+n.flips[1];return((-2===i||2===i)&&o>1||0===i&&(0===o||3===o))&&r.reflectY(),n.flips[0]===f._Y&&n.flips[1]===f._Y?r.rotate180():n.flips[0]===f._Y?r.translate(g):n.flips[1]===f._Y&&r.translate(d),r.translate(m),r.scale(1/2**t),r.transform(x[e]),r}(h,i,(0,f.ky)(e,h,l))}function A(t){const{S:e,segment:n,origin:r,resolution:o}=(0,b.iu)(t),s=v(k({S:e,segment:n,origin:r,resolution:o}).getCenter(),r);return c.c.normalizeLongitudes([s])[0]}function I(t){const{S:e,segment:n,origin:r,resolution:o}=(0,b.iu)(t);return w(k({S:e,segment:n,origin:r,resolution:o}),r)}function P(t,e){const n=w(k(t),t.origin);return new c.c(n).containsPoint(e)}},2189:(t,e,n)=>{n.d(e,{To:()=>o,iu:()=>c,lK:()=>u,xZ:()=>h});var r=n(3243);const o=3,s=31,i=58n,a=0x3ffffffffffffffn;function l(t){let e=s-1,n=t>>1n;for(;e>0&&0n===(0b1n&n);)e-=1,n>>=e<o?1n:2n;return e}function c(t){const e=l(t);if(0===e)return{origin:r.kt[0],segment:0,S:0n,resolution:e};const n=Number(t>>58n);let s,c;if(1===e){const t=n;s=r.kt[t],c=0}else{const t=Math.floor(n/5);s=r.kt[t],c=(n+s.firstQuintant)%5}if(!s)throw new Error(`Could not parse origin: ${n}`);if(e<o)return{origin:s,segment:c,S:0n,resolution:e};const u=BigInt(2*(e-o+1));return{origin:s,segment:c,S:(t&a)>>i-u,resolution:e}}function u(t){const{origin:e,segment:n,S:r,resolution:a}=t;if(a>s)throw new Error(`Resolution (${a}) is too large`);if(0===a)return 0n;let l;if(a<o)l=BigInt(a);else{l=BigInt(2*(1+a-o)+1)}const c=(n-e.firstQuintant+5)%5;let u;if(u=1===a?BigInt(e.id)<<58n:BigInt(5*e.id+c)<<58n,a>=o){const t=BigInt(2*(a-o+1));if(BigInt(r)>=1n<<t)throw new Error(`S (${r}) is too large for resolution level ${a}`);u+=BigInt(r)<<i-t}return u|=1n<<i-l,u}function h(t,e){const{origin:n,segment:r,S:o,resolution:i}=c(t),a=e??i+1;if(a<=i)throw new Error(`Target resolution (${a}) must be greater than current resolution (${i})`);if(a>s)throw new Error(`Target resolution (${a}) exceeds maximum resolution (${s})`);const l=a-i,h=Math.pow(4,l),f=[],p=o<<BigInt(2*l);for(let s=0;s<h;s++){const t=p+BigInt(s);f.push(u({origin:n,segment:r,S:t,resolution:a}))}return f}},3243:(t,e,n)=>{n.d(e,{BL:()=>b,MQ:()=>j,Sj:()=>y,b5:()=>w,jS:()=>S,kt:()=>m});var r=n(7823),o=n(9699),s=n(329),i=n(842),a=n(1383),l=n(1148);r.fG(Float64Array);const c=[0,0,1],u=["vu","uw","vw","vw","vw"],h=["wu","uw","vw","vu","uw"],f=["wu","uv","wv","wu","uw"],p=["vu","uv","wv","wu","uw"],d=[u,p,f,h,f,p,f,h,h,h,p,p],g=[4,2,3,2,0,4,3,2,2,0,3,0],x=[0,1,2,4,3,5,7,8,6,11,10,9],m=[];let M=0;function v(t,e){const n={id:M,axis:t,quat:(0,a.r5)(t),angle:e,orientation:d[M],firstQuintant:g[M]};m.push(n),M++}function w(t,e){const n=e.orientation,r=((n===u||n===h?-1:1)*((t-e.firstQuintant+5)%5)+5)%5,o=n[r];return{segment:(e.firstQuintant+r)%5,orientation:o}}function b(t,e){const n=e.orientation,r=n===u||n===h?-1:1,o=(t-e.firstQuintant+5)%5,s=n[o];return{quintant:(e.firstQuintant+r*o+5)%5,orientation:s}}function j(t,e,n){const r=o.vt();o.B8(r,e.quat);const u=(0,a.uB)(n.axis),h=s.vt();s.gL(h,u,r);const f=i.vt();i.S8(f,[h[0],h[1]]),i.hs(f,f,2*l.mN);const p=i.vt();i.Re(p,t,f);const d=o.vt();return o.Yc(d,c,h),o.lw(d,e.quat,d),{point:p,quat:d}}function y(t){let e=1/0,n=m[0];for(const r of m){const o=k(t,r.axis);o<e&&(e=o,n=r)}return n}function S(t,e){return k(t,e.axis)>.49}function k(t,e){const[n,r]=t,[o,s]=e,i=o-n,a=s-r,l=Math.sin(a/2),c=Math.sin(i/2);return l*l+c*c*Math.sin(r)*Math.sin(s)}!function(){v([0,0],0);for(let t=0;t<5;t++){const e=t*l.UT,n=e+l.R;v([e,l.Kk],l.R),v([n,Math.PI-l.Kk],l.R)}v([0,Math.PI],0)}(),m.sort(((t,e)=>x.indexOf(t.id)-x.indexOf(e.id))),m.forEach(((t,e)=>t.id=e))},3255:(t,e,n)=>{n.d(e,{NO:()=>i,_Y:()=>s,eS:()=>v,ky:()=>x});var r=n(7823),o=n(842);r.fG(Float64Array);const s=-1,i=1,a=t=>{let[e,n]=t;return o.fA(e-n,n)},l=o.fA(1,0),c=o.fA(0,1),u=o.ze(o.vt(),l),h=o.ze(o.vt(),c),f=o.fA(0,0),p=(t,e)=>{let[n,r]=e,a=f,p=f;switch(n===i&&r===i?(a=l,p=c):n===s&&r===i?(a=h,p=u):n===i&&r===s?(a=c,p=l):n===s&&r===s&&(a=u,p=h),t){case 0:return f;case 1:return a;case 2:return o.WQ(o.vt(),p,a);case 3:return o.Ln(o.vt(),p,a,2);default:throw new Error(`Invalid Quaternary value: ${t}`)}},d=t=>[[i,i],[i,s],[i,i],[s,i]][t],g=o.fA(-1,1),x=(t,e,n)=>{let r=BigInt(t);const i="wv"===n||"vw"===n,a="wu"===n||"uw"===n;("vu"===n||"wu"===n||"vw"===n)&&(r=(1n<<BigInt(2*e))-r-1n);const l=m(r);if(a){const{offset:[t,e],flips:[n,r]}=l;l.offset=[e,t],n===s&&o.WQ(l.offset,l.offset,g),r===s&&o.Re(l.offset,l.offset,g)}if(i){const{offset:[t,n],flips:r}=l,o=(1<<e)-(t+n);r[0]=-r[0],l.offset[1]=o,l.flips=r}return l},m=t=>{const e=Number(t)%4,n=o.vt(),r=[i,i];let s=BigInt(t);const l=[];for(;s>0n;)l.push(Number(s%4n)),s>>=2n;for(let i=l.length-1;i>=0;i--){o.hs(n,n,2);const t=p(l[i],r);o.WQ(n,n,t),o.lw(r,r,d(l[i]))}return{flips:r,k:e,offset:a(n)}},M=(t,e)=>{let[n,r]=t,o=0,i=e[0]===s?-(n+r):n+r,a=e[1]===s?-n:n,l=e[0]===s?-r:r;return o=e[0]+e[1]===0?l<1?0:a>1?3:i>1?2:1:i<1?0:a>1?3:l>1?2:1,o},v=function(t,e,n){void 0===n&&(n="uv");const r="vu"===n||"wu"===n||"vw"===n,o="wv"===n||"vw"===n,s="wu"===n||"uw"===n;let i=[...t];if(s&&(i[0]=t[1],i[1]=t[0]),o){const[t,n]=i;i[1]=(1<<e)-(t+n)}let a=w(i);return r&&(a=(1n<<BigInt(2*e))-a-1n),a},w=t=>{const e=(t=>{const e=Math.ceil(t[0])+Math.ceil(t[1]);return 0===e?1:1+Math.floor(Math.log2(e))})(t),n=new Array(e),r=[i,i],s=o.vt();for(let i=0;i<e;i++){const l=o.Re(o.vt(),t,s),c=1<<e-1-i,u=o.hs(o.vt(),l,1/c),h=M(u,r);n[i]=h;const f=a(p(h,r)),g=o.hs(o.vt(),f,c);o.WQ(s,s,g),o.lw(r,r,d(h))}let l=0n;for(let o=0;o<e;o++){const t=1n<<BigInt(2*(e-1-o));l+=BigInt(n[o])*t}return l}},6864:(t,e,n)=>{n.d(e,{s:()=>x,r:()=>m});var r=n(7823),o=n(329),s=n(9699),i=n(1383),a=n(1148);function l(t){const e=t/a.UT;return(e-Math.round(e))*a.UT}function c(t){const e=t*a.ZP;return Math.tan(e)}const u=a.R,h=c(u)/u;function f(t){return function(t){return Math.atan(t)/a.ZP}(t*h)}function p(t,e){const n=t*(.95-.05*(Math.abs(e)/u));return Math.tan(n)}function d(t){let[e,n]=t;const r=l(n),o=function(t){return c(t)/h}(l(n)),s=o-r,i=Math.cos(r)/Math.cos(o)*e,u=a.mN/Math.cos(o),f=p(u,o)/u;return[p(i,o)/f,n+s]}function g(t){let[e,n]=t;const r=l(n),o=f(r),s=r-o,i=a.mN/Math.cos(r),c=function(t,e){const n=Math.abs(e)/u;return Math.atan(t)/(.95-.05*n)}(e*(p(i,r)/i),r);return[c/(Math.cos(o)/Math.cos(r)),n-s]}function x(t,e,n){const[r,s]=d(t),a=function(t){const[e,n]=t,r=e*Math.cos(n),o=e*Math.sin(n);return(0,i.lN)([r,o,1])}([r,s+n]),l=(0,i.uB)(a);return o.gL(l,l,e),(0,i.lN)(l)}function m(t,e,n){const[r,a,l]=(0,i.uB)(t),c=s.vt();s.B8(c,e);const u=o.vt();o.gL(u,[r,a,l],c);const h=function(t){const[e,n,r]=(0,i.uB)(t),o=e/r,s=n/r;return[Math.sqrt(o*o+s*s),Math.atan2(s,o)]}((0,i.lN)(u));return h[1]=h[1]-n,g(h)}r.fG(Float64Array)},7120:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>E,contentTitle:()=>W,default:()=>_,frontMatter:()=>z,metadata:()=>r,toc:()=>N});const r=JSON.parse('{"id":"area","title":"Area Variance","description":"","source":"@site/src/examples/area.mdx","sourceDirName":".","slug":"/area","permalink":"/examples/area","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"examplesSidebar","previous":{"title":"Globe","permalink":"/examples/globe"},"next":{"title":"Cells","permalink":"/examples/cells"}}');var o=n(4848),s=n(8453),i=n(6540),a=n(4258),l=(n(5338),n(9533)),c=n(3727),u=n(5212),h=n(5890),f=n(4923),p=n(9485),d=n(1383),g=n(435),x=n(1970);const m=["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],M=t=>{let{areaLimits:e,perimeterLimits:n,tilingSystem:r,onTilingSystemChange:s}=t;const[i,a]=e,[l,c]=n,u=a/i,h=c/l;return(0,o.jsxs)("div",{style:{position:"absolute",top:"20px",left:"60px",background:"white",padding:"12px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,fontSize:"12px",lineHeight:"1.5"},children:[(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,o.jsx)("label",{style:{marginRight:"8px"},children:"Tiling System:"}),(0,o.jsxs)("select",{value:r,onChange:t=>s(t.target.value),style:{padding:"4px"},children:[(0,o.jsx)("option",{value:"h3",children:"H3 (Hexagons)"}),(0,o.jsx)("option",{value:"a5",children:"A5 (Pentagons)"})]})]}),(0,o.jsx)("h3",{style:{margin:"0 0 8px",fontSize:"14px"},children:"Area Statistics"}),(0,o.jsxs)("div",{children:["Min Area: ",i.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{children:["Max Area: ",a.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{children:["Area Ratio: ",u.toFixed(4)]}),(0,o.jsx)("h3",{style:{margin:"12px 0 8px",fontSize:"14px"},children:"Area Statistics"}),(0,o.jsxs)("div",{children:["Min Perimeter: ",l.toFixed(2)," km"]}),(0,o.jsxs)("div",{children:["Max Perimeter: ",c.toFixed(2)," km"]}),(0,o.jsxs)("div",{children:["Perimeter Ratio: ",h.toFixed(4)]})]})},v=t=>{let{tilingSystem:e,h3Output:n,a5Output:r,onCellHover:s}=t;const i=t=>{const e=[],n=t.length;for(let r=0;r<n;r++){const o=t[(r-1+n)%n],s=t[r],i=t[(r+1)%n],a=[o[0]-s[0],o[1]-s[1]],l=[i[0]-s[0],i[1]-s[1]],c=(a[0]*l[0]+a[1]*l[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1])*Math.sqrt(l[0]*l[0]+l[1]*l[1])),u=Math.max(-1,Math.min(1,c)),h=180*Math.acos(u)/Math.PI;e.push(h)}return e},a=t=>{const e=(0,f.u$)(t.cell),n=(0,f._k)(t.cell),r=n[0]*Math.PI/180,o=n[1]*Math.PI/180;return e.map((t=>{const e=t[0]*Math.PI/180,n=t[1]*Math.PI/180,s=Math.sin(r)*Math.sin(e)+Math.cos(r)*Math.cos(e)*Math.cos(n-o);return[Math.cos(e)*Math.sin(n-o)/s,(Math.cos(r)*Math.sin(e)-Math.sin(r)*Math.cos(e)*Math.cos(n-o))/s]}))},l=t=>{const{vertices:e}=t,n=e.reduce(((t,e)=>{let[n,r,o]=t,[s,i]=e;const a=i*Math.PI/180,l=s*Math.PI/180;return[n+Math.cos(a)*Math.cos(l),r+Math.cos(a)*Math.sin(l),o+Math.sin(a)]}),[0,0,0]),r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=n.map((t=>t/r)),s=180*Math.asin(o[2])/Math.PI,i=180*Math.atan2(o[1],o[0])/Math.PI,a=s*Math.PI/180,l=i*Math.PI/180;return e.map((t=>{const e=t[1]*Math.PI/180,n=t[0]*Math.PI/180,r=Math.sin(a)*Math.sin(e)+Math.cos(a)*Math.cos(e)*Math.cos(n-l);return[Math.cos(e)*Math.sin(n-l)/r,(Math.cos(a)*Math.sin(e)-Math.sin(a)*Math.cos(e)*Math.cos(n-l))/r]}))},c=(t,e)=>{const n=t[0],r=Math.atan2(n[1],n[0]),o=-Math.PI/2-r,s=t.map((t=>{const n=t[0]*Math.cos(o)-t[1]*Math.sin(o),r=t[0]*Math.sin(o)+t[1]*Math.cos(o);return[n*e,r*e]}));let i="M";return s.forEach(((t,e)=>{const n=50+t[0],r=50-t[1];i+=`${0===e?"":" L"}${n},${r}`})),i+="Z",{path:i,transformedPoints:s}},{smallest:u,largest:h}=(()=>{const t=n.filter((t=>!(0,f.PB)(t.cell))).sort(((t,e)=>t.properties.area-e.properties.area));return{smallest:t[0],largest:t[t.length-1]}})(),{smallest:p,largest:d}=(()=>{const t=[...r].sort(((t,e)=>t.properties.area-e.properties.area));return{smallest:t[0],largest:t[t.length-1]}})(),g="h3"===e?u:p,x="h3"===e?h:d,m="h3"===e?a(g):l(g),M="h3"===e?a(x):l(x),v=45/Math.max(...M.map((t=>Math.sqrt(t[0]*t[0]+t[1]*t[1])))),{path:w,transformedPoints:b}=c(m,v),{path:j,transformedPoints:y}=c(M,v),S=i(b),k=i(y);return(0,o.jsxs)("div",{style:{position:"absolute",bottom:"20px",right:"20px",background:"white",padding:"12px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"400px"},children:[(0,o.jsx)("h3",{style:{margin:"0 0 8px",fontSize:"14px",textAlign:"center"},children:"Cell Comparison"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"20px",alignItems:"flex-start"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{margin:"0 0 5px",fontSize:"12px",textAlign:"center"},children:"Smallest Cell"}),(0,o.jsx)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",style:{border:"1px solid #ccc",cursor:"pointer"},onMouseEnter:()=>s(g,!0),onMouseLeave:()=>s(g,!1),children:(0,o.jsx)("path",{d:w,fill:"#6baed6",stroke:"#000",strokeWidth:"1"})}),(0,o.jsxs)("p",{style:{margin:"5px 0 0",fontSize:"10px",textAlign:"center"},children:[g.properties.area.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{style:{marginTop:"5px",fontSize:"10px"},children:[(0,o.jsx)("p",{style:{margin:"0 0 2px",fontWeight:"bold"},children:"Angles (degrees):"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px 6px"},children:S.map(((t,e)=>(0,o.jsxs)("span",{children:[t.toFixed(2),"\xb0"]},e)))})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{margin:"0 0 5px",fontSize:"12px",textAlign:"center"},children:"Largest Cell"}),(0,o.jsx)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",style:{border:"1px solid #ccc",cursor:"pointer"},onMouseEnter:()=>s(x,!0),onMouseLeave:()=>s(x,!1),children:(0,o.jsx)("path",{d:j,fill:"#fd8d3c",stroke:"#000",strokeWidth:"1"})}),(0,o.jsxs)("p",{style:{margin:"5px 0 0",fontSize:"10px",textAlign:"center"},children:[x.properties.area.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{style:{marginTop:"5px",fontSize:"10px"},children:[(0,o.jsx)("p",{style:{margin:"0 0 2px",fontWeight:"bold"},children:"Angles (degrees):"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px 6px"},children:k.map(((t,e)=>(0,o.jsxs)("span",{children:[t.toFixed(2),"\xb0"]},e)))})]})]})]})]})},w=(0,f.yn)().map((t=>(0,f.xZ)(t,1))).flat();let b=[0,0],j=[0,0];const y=w.map((t=>{const e=(0,f.Sq)(t,"km2"),n=(t=>{const e=(0,f.GX)(t).map((t=>(0,f.E_)(t)));let n=0;for(let r=0;r<e.length;r++){const t=e[r],o=e[(r+1)%e.length];n+=(0,f.vJ)(t,o,"km")}return n})(t);return{cell:t,properties:{area:e,perimeter:n,perimeterRatio:Math.sqrt(1/e)*n}}})),S=y.map((t=>t.properties.area)),k=y.map((t=>t.properties.perimeter));b=[Math.min(...S),Math.max(...S)],j=[Math.min(...k),Math.max(...k)];const A=(0,p.g)(4);let I=[1/0,-1/0],P=[1/0,-1/0];const B=A.map((t=>{const e=t.map((t=>(0,d.uB)((0,d.Rb)(t)))),n=510072e3*(0,x.k)(e)/(4*Math.PI),r=(t=>{let e=0;for(let n=0;n<t.length;n++){const r=t[n],o=t[(n+1)%t.length];e+=(0,f.vJ)([r[1],r[0]],[o[1],o[0]],"km")}return e})(t),o=Math.sqrt(1/n)*r;return I[0]=Math.min(I[0],n),I[1]=Math.max(I[1],n),P[0]=Math.min(P[0],r),P[1]=Math.max(P[1],r),{vertices:t,properties:{area:n,perimeter:r,perimeterRatio:o}}})),F=t=>{let{areaLimits:e,h3AreaLimits:n}=t;const[r,s]=e,[i,a]=n,l=(r-i)/(a-i)*100,c=(s-i)/(a-i)*100;return(0,o.jsx)("div",{style:{position:"absolute",bottom:"20px",left:"20px",top:"20px",background:"white",padding:"8px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,fontFamily:"sans-serif",fontSize:"12px",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,o.jsxs)("div",{style:{width:"16px",flex:1,position:"relative",borderRadius:"4px",overflow:"visible"},children:[(0,o.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,background:`linear-gradient(to bottom, ${m.join(",")})`}}),(0,o.jsx)("div",{style:{position:"absolute",top:0,height:`${l}%`,left:0,right:0,background:"rgba(0, 0, 0, 0.5)",transition:"height 1s ease-in-out"}}),(0,o.jsx)("div",{style:{position:"absolute",bottom:0,height:100-c+"%",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",transition:"height 1s ease-in-out"}}),(0,o.jsx)("div",{style:{position:"absolute",top:`${l}%`,height:c-l+"%",left:"-4px",right:"-4px",border:"1px solid #000",pointerEvents:"none",transition:"top 1s ease-in-out, height 1s ease-in-out"}})]})})},C=()=>{const[t,e]=(0,i.useState)("a5"),[n,r]=(0,i.useState)(b),[s,a]=(0,i.useState)(j),[c,p]=(0,i.useState)(null),d=(0,i.useRef)(null);(0,i.useEffect)((()=>{"h3"===t?(r(b),a(j)):(r(I),a(P))}),[t]);const x=Array.from({length:11},((t,e)=>b[0]+e*(b[1]-b[0])/10)),m={filled:!0,stroked:!0,extruded:!1,getFillColor:(t,e)=>(0,g.A)({attr:t=>t.properties.area,domain:x,colors:"Bold"})(t,e),updateTriggers:{getFillColor:b},opacity:.8,getLineColor:[255,255,255,30],lineWidthMinPixels:2,pickable:!0,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}},w="h3"===t?new u.A({id:"h3-hexagons",data:y,getHexagon:t=>t.cell,...m}):new h.A({id:"a5-pentagons",data:B,getPolygon:t=>t.vertices,...m});let S=null;c&&(S="h3"===t?new u.A({id:"highlight-h3-hexagon",data:[c],filled:!0,stroked:!0,extruded:!1,getHexagon:t=>t.cell,getFillColor:[255,255,0,150],getLineColor:[255,255,0,255],lineWidthMinPixels:4,pickable:!1,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}}):new h.A({id:"highlight-a5-pentagon",data:[c],getPolygon:t=>t.vertices,getFillColor:[255,255,0,150],getLineColor:[255,255,0,255],lineWidthMinPixels:4,filled:!0,stroked:!0,pickable:!1,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}}));const k=S?[w,S]:[w];return(0,o.jsxs)("div",{style:{position:"absolute",height:"100%",width:"100%",top:0,left:0,background:"linear-gradient(0, #000, #223)"},children:[(0,o.jsx)(l.T5,{ref:d,projection:"globe",id:"map",initialViewState:{longitude:0,latitude:0,zoom:2,pitch:0,bearing:0},mapStyle:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",children:(0,o.jsx)($,{layers:k,interleaved:!0})}),(0,o.jsx)(M,{areaLimits:n,perimeterLimits:s,tilingSystem:t,onTilingSystemChange:t=>{e(t),p(null)}}),(0,o.jsx)(v,{tilingSystem:t,h3Output:y,a5Output:B,onCellHover:(e,n)=>{if(n){let n;if(p(e),"h3"===t)n=(0,f._k)(e.cell),n=[n[1],n[0]];else{const t=e.vertices,r=t.reduce(((t,e)=>t+e[0]),0),o=t.reduce(((t,e)=>t+e[1]),0);n=[r/t.length,o/t.length]}d.current&&d.current.flyTo({center:n,duration:1e3,essential:!0})}else p(null)}}),(0,o.jsx)(F,{areaLimits:n,h3AreaLimits:b})]})},T=C;function $(t){const e=(0,l.VI)((()=>new c.A(t))),{current:n}=(0,l.ko)();return(0,i.useEffect)((()=>{n&&n.flyTo({center:[-90,20],curve:.1,speed:.002})}),[n]),e.setProps(t),null}var L=n(999);class R extends i.Component{static title="Area Variance";static code=(()=>`${a.l}/examples/website/area`)();static parameters={};static renderInfo(t){return(0,o.jsx)("div",{children:(0,o.jsx)("p",{children:"Area variance"})})}render(){return(0,o.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",background:"#111"},children:(0,o.jsx)(T,{...this.props})})}}const q=(0,L.xv)(R),z={},W="Area Variance",E={},N=[];function Q(t){const e={h1:"h1",header:"header",...(0,s.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"area-variance",children:"Area Variance"})}),"\n","\n",(0,o.jsx)(q,{})]})}function _(t={}){const{wrapper:e}={...(0,s.R)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(Q,{...t})}):Q(t)}},9485:(t,e,n)=>{n.d(e,{g:()=>s});var r=n(1921),o=n(2189);function s(t){let e=[],n=1,s=0n;1===t?(n=12,s=0b10n<<56n):(n=60,s=0b01n<<56n);for(let i=0;i<n;i++){const n=BigInt(i)<<58n|s;if(t<o.To)e.push((0,r.u$)(n));else{const s=(0,o.xZ)(n,t);e=e.concat(s.map((t=>(0,r.u$)(t))))}}return e}}}]);